import{b as S,a as y,r as u,u as k,j as o,s as g,k as b,d as w,m as Ce,P as V,F as N,n as Se,c as j,o as f,M as ye,p as ke,q as H,T as c,e as Y,S as l,A as we,B as R,l as U,v as De,L as z}from"./index-x1sxhsMS.js";import{c as E,C,a as Pe,d as Me}from"./useSecurityData-CaMGW0YO.js";import{C as We,a as Te,L as Re,D as $e}from"./LinearProgress-DcXVZ3u_.js";import{G as q}from"./Grid-BroAID6K.js";function Fe(e){return S("MuiCardActions",e)}y("MuiCardActions",["root","spacing"]);const Be=e=>{const{classes:s,disableSpacing:t}=e;return w({root:["root",!t&&"spacing"]},Fe,s)},Ae=g("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:t}=e;return[s.root,!t.disableSpacing&&s.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Ie=u.forwardRef(function(s,t){const r=k({props:s,name:"MuiCardActions"}),{disableSpacing:a=!1,className:n,...p}=r,d={...r,disableSpacing:a},x=Be(d);return o.jsx(Ae,{className:b(x.root,n),ownerState:d,ref:t,...p})});function Le(e){return S("MuiDialog",e)}const T=y("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),O=u.createContext({}),Ne=g(ke,{name:"MuiDialog",slot:"Backdrop",overrides:(e,s)=>s.backdrop})({zIndex:-1}),Ue=e=>{const{classes:s,scroll:t,maxWidth:r,fullWidth:a,fullScreen:n}=e,p={root:["root"],container:["container",`scroll${f(t)}`],paper:["paper",`paperScroll${f(t)}`,`paperWidth${f(String(r))}`,a&&"paperFullWidth",n&&"paperFullScreen"]};return w(p,Le,s)},ze=g(ye,{name:"MuiDialog",slot:"Root",overridesResolver:(e,s)=>s.root})({"@media print":{position:"absolute !important"}}),qe=g("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,s)=>{const{ownerState:t}=e;return[s.container,s[`scroll${f(t.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),Ve=g(V,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,s)=>{const{ownerState:t}=e;return[s.paper,s[`scrollPaper${f(t.scroll)}`],s[`paperWidth${f(String(t.maxWidth))}`],t.fullWidth&&s.paperFullWidth,t.fullScreen&&s.paperFullScreen]}})(H(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:s})=>!s.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${T.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(s=>s!=="xs").map(s=>({props:{maxWidth:s},style:{maxWidth:`${e.breakpoints.values[s]}${e.breakpoints.unit}`,[`&.${T.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[s]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:s})=>s.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:s})=>s.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${T.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),He=u.forwardRef(function(s,t){const r=k({props:s,name:"MuiDialog"}),a=Ce(),n={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{"aria-describedby":p,"aria-labelledby":d,"aria-modal":x=!0,BackdropComponent:i,BackdropProps:X,children:G,className:J,disableEscapeKeyDown:$=!1,fullScreen:K=!1,fullWidth:Q=!1,maxWidth:Z="sm",onBackdropClick:F,onClick:B,onClose:D,open:A,PaperComponent:_=V,PaperProps:I={},scroll:ee="paper",slots:oe={},slotProps:se={},TransitionComponent:te=N,transitionDuration:L=n,TransitionProps:re,...ie}=r,h={...r,disableEscapeKeyDown:$,fullScreen:K,fullWidth:Q,maxWidth:Z,scroll:ee},P=Ue(h),M=u.useRef(),ae=m=>{M.current=m.target===m.currentTarget},ne=m=>{B&&B(m),M.current&&(M.current=null,F&&F(m),D&&D(m,"backdropClick"))},W=Se(d),le=u.useMemo(()=>({titleId:W}),[W]),ce={transition:te,...oe},de={transition:re,paper:I,backdrop:X,...se},v={slots:ce,slotProps:de},[pe,ue]=j("root",{elementType:ze,shouldForwardComponentProp:!0,externalForwardedProps:v,ownerState:h,className:b(P.root,J),ref:t}),[xe,ge]=j("backdrop",{elementType:Ne,shouldForwardComponentProp:!0,externalForwardedProps:v,ownerState:h}),[he,me]=j("paper",{elementType:Ve,shouldForwardComponentProp:!0,externalForwardedProps:v,ownerState:h,className:b(P.paper,I.className)}),[be,fe]=j("container",{elementType:qe,externalForwardedProps:v,ownerState:h,className:b(P.container)}),[ve,je]=j("transition",{elementType:N,externalForwardedProps:v,ownerState:h,additionalProps:{appear:!0,in:A,timeout:L,role:"presentation"}});return o.jsx(pe,{closeAfterTransition:!0,slots:{backdrop:xe},slotProps:{backdrop:{transitionDuration:L,as:i,...ge}},disableEscapeKeyDown:$,onClose:D,open:A,onClick:ne,...ue,...ie,children:o.jsx(ve,{...je,children:o.jsx(be,{onMouseDown:ae,...fe,children:o.jsx(he,{as:_,elevation:24,role:"dialog","aria-describedby":p,"aria-labelledby":W,"aria-modal":x,...me,children:o.jsx(O.Provider,{value:le,children:G})})})})})});function Ye(e){return S("MuiDialogContent",e)}y("MuiDialogContent",["root","dividers"]);function Ee(e){return S("MuiDialogTitle",e)}const Oe=y("MuiDialogTitle",["root"]),Xe=e=>{const{classes:s,dividers:t}=e;return w({root:["root",t&&"dividers"]},Ye,s)},Ge=g("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:t}=e;return[s.root,t.dividers&&s.dividers]}})(H(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:s})=>s.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:s})=>!s.dividers,style:{[`.${Oe.root} + &`]:{paddingTop:0}}}]}))),Je=u.forwardRef(function(s,t){const r=k({props:s,name:"MuiDialogContent"}),{className:a,dividers:n=!1,...p}=r,d={...r,dividers:n},x=Xe(d);return o.jsx(Ge,{className:b(x.root,a),ownerState:d,ref:t,...p})}),Ke=e=>{const{classes:s}=e;return w({root:["root"]},Ee,s)},Qe=g(c,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,s)=>s.root})({padding:"16px 24px",flex:"0 0 auto"}),Ze=u.forwardRef(function(s,t){const r=k({props:s,name:"MuiDialogTitle"}),{className:a,id:n,...p}=r,d=r,x=Ke(d),{titleId:i=n}=u.useContext(O);return o.jsx(Qe,{component:"h2",className:b(x.root,a),ownerState:d,ref:t,variant:"h6",id:n??i,...p})}),_e=Y(o.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),eo=Y(o.jsx("path",{d:"M14.4 6 14 4H5v17h2v-7h5.6l.4 2h7V6z"}),"Flag"),oo=e=>e>=85?{label:"Critique",color:"error"}:e>=70?{label:"Élevé",color:"warning"}:e>=45?{label:"Modéré",color:"info"}:{label:"Faible",color:"success"},so=({player:e,onInspect:s,onReport:t})=>{const r=u.useMemo(()=>oo(e.riskScore),[e.riskScore]);return o.jsxs(We,{variant:"outlined",sx:{borderRadius:20,height:"100%"},children:[o.jsx(Te,{children:o.jsxs(l,{spacing:2,children:[o.jsxs(l,{direction:"row",spacing:2,alignItems:"center",children:[o.jsx(we,{src:`https://api.dicebear.com/7.x/identicon/svg?seed=${e.username}`,alt:e.username,sx:{width:56,height:56}}),o.jsxs(R,{children:[o.jsx(c,{variant:"subtitle1",fontWeight:600,children:e.username}),o.jsxs(c,{variant:"caption",color:"text.secondary",children:["Dernière activité : ",E(e.lastSession)]})]})]}),o.jsxs(l,{direction:"row",spacing:1,alignItems:"center",children:[o.jsx(c,{variant:"h5",fontWeight:700,children:e.riskScore.toFixed(0)}),o.jsx(C,{color:r.color,size:"small",label:r.label}),o.jsxs(c,{variant:"caption",color:"text.secondary",children:["Probabilité de triche ",e.cheatProbability.toFixed(0),"%"]})]}),o.jsxs(R,{children:[o.jsx(c,{variant:"caption",color:"text.secondary",children:"Évolution du risque"}),o.jsx(Re,{variant:"determinate",value:e.riskScore,sx:{height:6,borderRadius:999,mt:.5}})]}),o.jsxs(l,{spacing:1,children:[o.jsx(c,{variant:"caption",color:"text.secondary",children:"Signaux actifs"}),o.jsx(l,{direction:"row",spacing:1,flexWrap:"wrap",children:e.flags.map(a=>o.jsx(C,{label:a,size:"small",variant:"outlined"},a))})]})]})}),o.jsxs(Ie,{sx:{justifyContent:"space-between",px:3,pb:3},children:[o.jsx(U,{variant:"contained",color:"primary",size:"small",startIcon:o.jsx(_e,{}),onClick:()=>s==null?void 0:s(e),children:"Voir le profil"}),o.jsx(U,{variant:"outlined",color:"warning",size:"small",startIcon:o.jsx(eo,{}),onClick:()=>t==null?void 0:t(e),children:"Signaler"})]})]})},no=()=>{const{searchTerm:e}=De(),{data:s,isLoading:t}=Pe(),[r,a]=u.useState(null),{data:n}=Me(r==null?void 0:r.id,{enabled:!!r}),p=i=>a(i),d=i=>a(i),x=u.useMemo(()=>s?e?s.filter(i=>i.username.toLowerCase().includes(e.toLowerCase())):s:[],[s,e]);return t?o.jsx(z,{fullscreen:!0,message:"Chargement des profils joueurs…"}):o.jsxs(l,{spacing:4,children:[o.jsxs(l,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[o.jsxs(R,{children:[o.jsx(c,{variant:"h4",fontWeight:700,children:"Joueurs suivis"}),o.jsx(c,{variant:"body2",color:"text.secondary",children:"Recherche et suivi des profils signalés récemment."})]}),o.jsx(C,{label:`${x.length} résultats`,color:"primary"})]}),o.jsx(q,{container:!0,spacing:3,children:x.map(i=>o.jsx(q,{item:!0,xs:12,md:6,lg:4,children:o.jsx(so,{player:i,onInspect:p,onReport:d})},i.id))}),o.jsxs(He,{open:!!r,onClose:()=>a(null),maxWidth:"md",fullWidth:!0,"aria-labelledby":"player-dialog-title",children:[o.jsx(Ze,{id:"player-dialog-title",children:r==null?void 0:r.username}),o.jsx(Je,{dividers:!0,children:n?o.jsxs(l,{spacing:3,children:[o.jsxs(l,{direction:"row",spacing:2,alignItems:"center",children:[o.jsxs(c,{variant:"body1",children:["Score de risque actuel : ",o.jsx("strong",{children:n.riskScore.toFixed(0)})]}),o.jsx(C,{label:`Probabilité de triche ${n.cheatProbability.toFixed(0)}%`,color:n.riskScore>85?"error":"warning"})]}),o.jsxs(l,{spacing:1,children:[o.jsx(c,{variant:"subtitle2",color:"text.secondary",children:"Historique des parties"}),o.jsx(l,{spacing:1,children:n.history.map(i=>o.jsxs(l,{direction:"row",justifyContent:"space-between",divider:o.jsx($e,{flexItem:!0,orientation:"vertical"}),children:[o.jsx(c,{variant:"body2",children:E(i.timestamp)}),o.jsxs(c,{variant:"body2",children:["Risque ",i.riskScore.toFixed(0)]})]},i.timestamp))})]}),o.jsxs(l,{spacing:1,children:[o.jsx(c,{variant:"subtitle2",color:"text.secondary",children:"Signaux actifs"}),o.jsx(l,{direction:"row",spacing:1,flexWrap:"wrap",children:n.flags.map(i=>o.jsx(C,{label:i,variant:"outlined"},i))})]})]}):o.jsx(z,{message:"Récupération du profil en cours…"})})]})]})};export{no as default};
//# sourceMappingURL=Players-D8zpeS79.js.map
